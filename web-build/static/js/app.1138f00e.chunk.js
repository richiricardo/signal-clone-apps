(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{238:function(e,t,a){"use strict";a.d(t,"a",(function(){return M}));a(327);var n=a(72),r=a(0),o=a.n(r),i=a(2),c=a(176),l=a(16),s=a.n(l),u=a(3),m=a(29),d=a(83),h=a(74),f=(a(315),a(316),(0===h.apps.length?h.initializeApp({apiKey:"AIzaSyAVUJdOvbwvjRHDNvKgx3Uvsxe8fUOtPCQ",authDomain:"interact-e54d0.firebaseapp.com",projectId:"interact-e54d0",storageBucket:"interact-e54d0.appspot.com",messagingSenderId:"306882113680",appId:"1:306882113680:web:f1eeeba23db9dc41802815"}):h.app()).firestore()),g=h.auth(),p=function(e){var t=e.navigation,a=Object(r.useState)(""),i=s()(a,2),c=i[0],l=i[1],h=Object(r.useState)(""),f=s()(h,2),p=f[0],b=f[1];Object(r.useEffect)((function(){return g.onAuthStateChanged((function(e){e&&t.replace("Home")}))}),[]);var y=function(){g.signInWithEmailAndPassword(c,p).catch((function(e){return alert(e)}))};return o.a.createElement(d.a,{behavior:"padding",style:E.container},o.a.createElement(n.a,{style:"light"}),o.a.createElement(m.d,{source:{uri:"https://blog.mozilla.org/internetcitizen/files/2018/08/signal-logo.png"},style:{width:200,height:200}}),o.a.createElement(u.a,{style:E.inputContainer},o.a.createElement(m.e,{placeholder:"Email",autoFocus:!0,type:"Email",value:c,onChangeText:function(e){return l(e)}}),o.a.createElement(m.e,{placeholder:"password",secureTextEntry:!0,type:"password",value:p,onChangeText:function(e){return b(e)},onSubmitEditing:y})),o.a.createElement(m.b,{containerStyle:E.button,onPress:y,title:"Login"}),o.a.createElement(m.b,{onPress:function(){return t.navigate("Register")},containerStyle:E.button,type:"outline",title:"Register"}),o.a.createElement(u.a,{style:{height:100}}))},E=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"#fff"},inputContainer:{width:300},button:{width:200,marginTop:10}}),b=a(20),y=a(116),v=a(49),C=function(e){var t,a,n,i=e.id,c=e.chatName,l=e.enterChat,u=Object(r.useState)([]),d=s()(u,2),h=d[0],g=d[1];return Object(r.useEffect)((function(){return f.collection("chats").doc(i).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return g(e.docs.map((function(e){return e.data()})))}))})),o.a.createElement(m.f,{key:i,onPress:function(){return l(i,c)},key:i,bottomDivider:!0},o.a.createElement(m.a,{rounded:!0,source:{uri:(null==h||null==(t=h[0])?void 0:t.photoURL)||"https://www.vhv.rs/dpng/d/421-4213265_transparent-no-avatar-png-avatar-user-login-icon.png"}}),o.a.createElement(m.f.Content,null,o.a.createElement(m.f.Title,{style:{fontWeight:"800"}},c),o.a.createElement(m.f.Subtitle,{numberOfLines:1,ellipsizeMode:"tail"},null==h||null==(a=h[0])?void 0:a.displayName,": ",null==h||null==(n=h[0])?void 0:n.message)))},w=(i.a.create({}),a(228)),S=a(223),x=function(e){var t=e.navigation,a=Object(r.useState)([]),n=s()(a,2),i=n[0],c=n[1],l=function(){g.signOut().then((function(){t.replace("Login")}))};Object(r.useEffect)((function(){return f.collection("chats").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(r.useLayoutEffect)((function(){t.setOptions({title:"Interact",headerStyle:{backgroundColor:"#fff"},headerTitleStyle:{color:"black"},headerTintColor:"black",headerLeft:function(){var e;return o.a.createElement(u.a,{style:{marginLeft:20}},o.a.createElement(b.a,{onPress:l,activeOpacity:.5},o.a.createElement(m.a,{rounded:!0,source:{uri:null==g||null==(e=g.currentUser)?void 0:e.photoURL}})))},headerRight:function(){return o.a.createElement(u.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},o.a.createElement(b.a,{activeOpacity:.5},o.a.createElement(w.a,{name:"camerao",size:24,color:"black"})),o.a.createElement(b.a,{onPress:function(){return t.navigate("AddChat")},activeOpacity:.5},o.a.createElement(S.a,{name:"pencil",size:24,color:"black"})))}})}),[t]);var d=function(e,a){t.navigate("Chat",{id:e,chatName:a})};return o.a.createElement(y.a,null,o.a.createElement(v.a,{style:O.container},i.map((function(e){var t=e.id,a=e.data.chatName;return o.a.createElement(C,{key:t,id:t,chatName:a,enterChat:d})}))))},O=i.a.create({container:{height:"100%"}}),k=function(e){var t=e.navigation,a=Object(r.useState)(""),i=s()(a,2),c=i[0],l=i[1],h=Object(r.useState)(""),f=s()(h,2),p=f[0],E=f[1],b=Object(r.useState)(""),y=s()(b,2),v=y[0],C=y[1],w=Object(r.useState)(""),S=s()(w,2),x=S[0],O=S[1];Object(r.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Login"})}),[t]);var k=function(){g.createUserWithEmailAndPassword(p,v).then((function(e){e.user.updateProfile({displayName:c,photoURL:x||"https://www.vhv.rs/dpng/d/421-4213265_transparent-no-avatar-png-avatar-user-login-icon.png"})})).catch((function(e){return alert(e.message)}))};return o.a.createElement(d.a,{behavior:"padding",style:j.container},o.a.createElement(n.a,{style:"light"}),o.a.createElement(m.g,{h3:!0,style:{marginBottom:50}},"Create a Signal account"),o.a.createElement(u.a,{style:j.inputContainer},o.a.createElement(m.e,{placeholder:"Full Name",autofocus:!0,type:"text",value:c,onChangeText:function(e){return l(e)}}),o.a.createElement(m.e,{placeholder:"Email",type:"email",value:p,onChangeText:function(e){return E(e)}}),o.a.createElement(m.e,{placeholder:"Password",type:"password",secureTextEntry:!0,value:v,onChangeText:function(e){return C(e)}}),o.a.createElement(m.e,{placeholder:"Profile Picture URL (optional)",type:"text",value:x,onChangeText:function(e){return O(e)},onSubmitEditing:k})),o.a.createElement(m.b,{containerStyle:j.button,raised:!0,onPress:k,title:"Register"}),o.a.createElement(u.a,{style:{height:100}}))},j=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},button:{width:200,marginTop:10},inputContainer:{width:300}}),T=a(19),L=a.n(T),R=a(235),P=function(e){var t=e.navigation,a=Object(r.useState)(""),n=s()(a,2),i=n[0],c=n[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Add a new Chat",headerBackTitle:"Chats"})}),[t]);var l=function(){return L.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.awrap(f.collection("chats").add({chatName:i}).then((function(){t.goBack()})).catch((function(e){return alert(e)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)};return o.a.createElement(u.a,{style:U.container},o.a.createElement(m.e,{placeholder:"Enter a chat name",value:i,onChangeText:function(e){return c(e)},onSubmitEditing:l,leftIcon:o.a.createElement(m.c,{name:"wechat",type:"antdesign",size:24,color:"black"})}),o.a.createElement(R.a,{disabled:!i,onPress:l,title:"Create new Chat"}))},U=i.a.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),N=a(25),z=a(218),I=a(209),B=a(51),A=a(8),D=a(60),W=a(67),F=function(e){var t=e.navigation,a=e.route,i=Object(r.useState)(""),c=s()(i,2),l=c[0],p=c[1],E=Object(r.useState)([]),C=s()(E,2),S=C[0],x=C[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitleVisible:!1,headerTitleAlign:"left",headerTitle:function(){var e;return o.a.createElement(u.a,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(m.a,{rounded:!0,source:{uri:null==(e=S[0])?void 0:e.data.photoURL}}),o.a.createElement(N.a,{style:{color:"white",marginLeft:10,fontWeight:"700"}},a.params.chatName))},headerLeft:function(){return o.a.createElement(b.a,{style:{marginLeft:10},onPress:t.goBack},o.a.createElement(w.a,{name:"arrowleft",size:24,color:"white"}))},headerRight:function(){return o.a.createElement(u.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},o.a.createElement(b.a,null,o.a.createElement(z.a,{name:"video-camera",size:24,color:"white"})),o.a.createElement(b.a,null,o.a.createElement(I.a,{name:"call",size:24,color:"white"})))}})}),[t,S]);var O=function(){D.a.dismiss(),f.collection("chats").doc(a.params.id).collection("messages").add({timestamp:h.firestore.FieldValue.serverTimestamp(),message:l,displayName:g.currentUser.displayName,email:g.currentUser.email,photoURL:g.currentUser.photoURL}),p("")};return Object(r.useLayoutEffect)((function(){return f.collection("chats").doc(a.params.id).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return x(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[a]),o.a.createElement(y.a,{style:{flex:1,backgroundColor:"white"}},o.a.createElement(n.a,{style:"light"}),o.a.createElement(d.a,{behavior:"ios"===A.a.OS?"padding":"height",style:V.container,keyboardVerticalOffset:90},o.a.createElement(W.a,{onPress:D.a.dismiss},o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{contentContainerStyle:{paddingTop:15}},S.map((function(e){var t=e.id,a=e.data;return a.email===g.currentUser.email?o.a.createElement(u.a,{key:t,style:V.reciever},o.a.createElement(m.a,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-15,right:-5},bottom:-15,right:-5,size:30,source:{uri:a.photoURL}}),o.a.createElement(N.a,{style:V.recieverText},a.message)):o.a.createElement(u.a,{key:t,style:V.sender},o.a.createElement(m.a,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-15,right:-5},bottom:-15,right:-5,size:30,source:{uri:a.photoURL}}),o.a.createElement(N.a,{style:V.senderText},a.message),o.a.createElement(N.a,{style:V.senderName},a.displayName))}))),o.a.createElement(u.a,{style:V.footer},o.a.createElement(B.a,{value:l,onChangeText:function(e){return p(e)},onSubmitEditing:O,placeholder:"Interact Message",style:V.textInput}),o.a.createElement(b.a,{onPress:O,activeOpacity:.5},o.a.createElement(I.a,{name:"send",size:24,color:"#2c6bedfir"})))))))},V=i.a.create({container:{flex:1},reciever:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{padding:15,backgroundColor:"#2b68e6",alignSelf:"flex-start",borderRadius:20,margin:15,maxWidth:"80%",position:"relative"},senderText:{color:"white",fontWeight:"500",marginLeft:10,marginBottom:15},senderName:{left:10,paddingRight:10,fontSize:10,color:"white"},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},textInput:{bottom:0,height:40,flex:1,marginRight:15,backgroundColor:"#ececec",padding:10,color:"grey",borderRadius:30}}),H=a(342),J=Object(H.a)(),K={headerStyle:{backgroundColor:"#2c6bed"},headerTitleStyle:{color:"white"},headerTintColor:"white"};function M(){return o.a.createElement(c.a,null,o.a.createElement(J.Navigator,{screenOptions:K},o.a.createElement(J.Screen,{name:"Login",component:p}),o.a.createElement(J.Screen,{name:"Register",component:k}),o.a.createElement(J.Screen,{name:"Home",component:x}),o.a.createElement(J.Screen,{name:"AddChat",component:P}),o.a.createElement(J.Screen,{name:"Chat",component:F})))}i.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},249:function(e,t,a){e.exports=a(328)}},[[249,1,2]]]);
//# sourceMappingURL=app.1138f00e.chunk.js.map